<?xml version="1.0" encoding="UTF-8"?>
<Export generator="IRIS" version="26" zv="IRIS for UNIX (Ubuntu Server LTS for x86-64 Containers) 2020.1 (Build 214U)" ts="2020-03-25 13:28:44">
<Class name="Demo.FHIRBPL">
<Description>
</Description>
<Super>Ens.BusinessProcessBPL</Super>
<TimeChanged>65463,47443.326562</TimeChanged>
<TimeCreated>65461,71646.166321</TimeCreated>

<XData name="BPL">
<Description>
BPL Definition</Description>
<XMLNamespace>http://www.intersystems.com/bpl</XMLNamespace>
<Data><![CDATA[
<process language='objectscript' request='HS.FHIRServer.Interop.Request' response='HS.FHIRServer.Interop.Response' height='2000' width='2000' >
<context>
<property name='O2Sat' type='%Integer' instantiate='0' />
<property name='Payload' type='%DynamicObject' instantiate='0' />
<property name='Schedule' type='HS.FHIR.vSTU3.Model.Resource.Schedule' instantiate='0' />
</context>
<sequence xend='200' yend='900' >
<call name='Call Operation' target='HS.FHIRServer.Interop.Operation' async='0' xpos='200' ypos='250' >
<request type='HS.FHIRServer.Interop.Request' >
<assign property="callrequest" value="request" action="set" />
</request>
<response type='HS.FHIRServer.Interop.Response' >
<assign property="response" value="callresponse" action="set" />
</response>
</call>
<code xpos='200' ypos='350' >
<![CDATA[
  set stream = ##class(HS.SDA3.QuickStream).%OpenId(request.QuickStreamId)
  set Json = ##class(%DynamicObject).%FromJSON(stream)
  $$$TRACE(Json)]]]]><![CDATA[>
</code>
<if name='Check O2 Levels' condition='context.O2Sat &lt; 90' xpos='200' ypos='450' xend='200' yend='800' >
<true>
<transform name='trasform to send' class='Demo.FHIRObsToScheduleService' source='context.Payload' target='context.Schedule' xpos='335' ypos='600' disabled="true"/>
<call name='To Scheduling Service' target='HS.FHIR.REST.Operation' async='0' xpos='335' ypos='700' disabled="true">
<request type='HS.Message.FHIR.Request' >
<assign property="callrequest.HSCoreVersion" value="request.HSCoreVersion" action="set" />
<assign property="callrequest.HSMinVersion" value="request.HSMinVersion" action="set" />
<assign property="callrequest.%ClearFields" value="request.%ClearFields" action="set" />
<assign property="callrequest.Payload" value="context.Payload" action="set" />
</request>
<response type='Ens.Response' />
</call>
</true>
</if>
</sequence>
</process>
]]></Data>
</XData>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
</Storage>
</Class>


<Class name="Demo.FHIRObsToScheduleService">
<Super>Ens.DataTransformDTL</Super>
<TimeChanged>65462,67355.117451</TimeChanged>
<TimeCreated>65462,67351.131762</TimeCreated>
<DependsOn>HS.FHIR.vSTU3.Model.Resource.Observation,HS.FHIR.vSTU3.Model.Resource.Schedule</DependsOn>

<Parameter name="IGNOREMISSINGSOURCE">
<Default>1</Default>
</Parameter>

<Parameter name="REPORTERRORS">
<Default>1</Default>
</Parameter>

<Parameter name="TREATEMPTYREPEATINGFIELDASNULL">
<Default>0</Default>
</Parameter>

<XData name="DTL">
<XMLNamespace>http://www.intersystems.com/dtl</XMLNamespace>
<Data><![CDATA[
<transform sourceClass='HS.FHIR.vSTU3.Model.Resource.Observation' targetClass='HS.FHIR.vSTU3.Model.Resource.Schedule' targetDocType='2.5:SIU_S12' create='new' language='objectscript' >
</transform>
]]></Data>
</XData>
</Class>


<Project name="EnsExportProduction_2020-03-25 13-28-25_733+0" LastModified="2020-03-25 13:28:44.147691">
  <ProjectDescription>Studio Project generated from Production 'FHIRNAMESPACEPKG.FoundationProduction' at 2020-03-25 13:28:25.733 UTC</ProjectDescription>
  <Items>
    <ProjectItem name="Demo.FHIRBPL" type="CLS"></ProjectItem>
    <ProjectItem name="Demo.FHIRObsToScheduleService" type="CLS"></ProjectItem>
    <ProjectItem name="FHIRNAMESPACEPKG.FoundationProduction" type="CLS"></ProjectItem>
    <ProjectItem name="ProductionSettings:FHIRNAMESPACEPKG.FoundationProduction.PTD" type="PTD"></ProjectItem>
    <ProjectItem name="EnsExportNotes.EnsExportProduction_2020-03-25 13-28-25_733+0.PTD" type="PTD"></ProjectItem>
  </Items>
</Project>


<Class name="FHIRNAMESPACEPKG.FoundationProduction">
<ProcedureBlock>0</ProcedureBlock>
<Super>Ens.Production</Super>
<TimeChanged>65462,71883.359545</TimeChanged>
<TimeCreated>65461,71257.30077</TimeCreated>

<XData name="ProductionDefinition">
<Data><![CDATA[
<Production Name="FHIRNAMESPACEPKG.FoundationProduction" LogGeneralTraceEvents="true">
  <Description></Description>
  <ActorPoolSize>1</ActorPoolSize>
  <Item Name="Ens.Activity.Operation.Local" Category="" ClassName="Ens.Activity.Operation.Local" PoolSize="1" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
  </Item>
  <Item Name="HS.FHIRServer.Interop.Service" Category="" ClassName="HS.FHIRServer.Interop.Service" PoolSize="0" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
    <Setting Target="Host" Name="TargetConfigName">Demo.FHIRBPL</Setting>
  </Item>
  <Item Name="Demo.FHIRBPL" Category="" ClassName="Demo.FHIRBPL" PoolSize="1" Enabled="true" Foreground="false" Comment="" LogTraceEvents="true" Schedule="">
  </Item>
  <Item Name="HS.FHIRServer.Interop.Operation" Category="" ClassName="HS.FHIRServer.Interop.Operation" PoolSize="1" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
  </Item>
  <Item Name="HS.FHIR.REST.Operation" Category="" ClassName="HS.FHIR.REST.Operation" PoolSize="1" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
  </Item>
</Production>
]]></Data>
</XData>
</Class>


<Document name="EnsExportNotes.EnsExportProduction_2020-03-25 13-28-25_733+0.PTD"><ProjectTextDocument name="EnsExportNotes.EnsExportProduction_2020-03-25 13-28-25_733+0" description="Export Notes for export EnsExportProduction_2020-03-25 13-28-25_733+0">
<![CDATA[<Deployment>
<Creation>
<Machine>FC611BAE1571</Machine>
<Instance>IRIS</Instance>
<Namespace>FHIRNAMESPACE</Namespace>
<SourceProduction>FHIRNAMESPACEPKG.FoundationProduction</SourceProduction>
<Username>SuperUser</Username>
<UTC>2020-03-25 13:28:44.146</UTC>
</Creation>
<Notes>
</Notes>
<Contents>
<ExportProject>EnsExportProduction_2020-03-25 13-28-25_733+0</ExportProject>
<Item num="1">Demo.FHIRBPL.CLS</Item>
<Item num="2">Demo.FHIRObsToScheduleService.CLS</Item>
<Item num="3">FHIRNAMESPACEPKG.FoundationProduction.CLS</Item>
<Item num="4">ProductionSettings:FHIRNAMESPACEPKG.FoundationProduction.PTD</Item>
</Contents>
<ProductionClassInExport>FHIRNAMESPACEPKG.FoundationProduction</ProductionClassInExport>
</Deployment>

]]></ProjectTextDocument>
</Document>

<Document name="ProductionSettings:FHIRNAMESPACEPKG.FoundationProduction.PTD"><ProjectTextDocument name="ProductionSettings:FHIRNAMESPACEPKG.FoundationProduction" description="Settings for production FHIRNAMESPACEPKG.FoundationProduction">
<![CDATA[<Production Name='FHIRNAMESPACEPKG.FoundationProduction' LogGeneralTraceEvents='true'><Description/><ActorPoolSize>1</ActorPoolSize></Production>
]]></ProjectTextDocument>
</Document></Export>
